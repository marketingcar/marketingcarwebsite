@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================
   Theme tokens (HSL values)
   ========================= */
@layer base {
  :root {
    --background: 260 5.1% 12%;
    --foreground: 0 0% 98%;

    --card: 260 5.1% 15%;
    --card-foreground: 0 0% 98%;

    --popover: 260 5.1% 10%;
    --popover-foreground: 0 0% 98%;

    --primary: 279 64% 32%;
    --primary-foreground: 0 0% 100%;

    --secondary: 165 100% 29%;
    --secondary-foreground: 0 0% 100%;

    --accent: 200 54% 32%;
    --accent-foreground: 0 0% 100%;

    --highlight: 173 80% 53%;
    --highlight-foreground: 260 11% 11%;

    --muted: 0 0% 61.6%;
    --muted-foreground: 0 0% 98%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;

    --border: 260 5% 25%;
    --input: 260 5% 25%;
    --ring: 279 64% 45%;

    --radius: 0.75rem;

    /* Headline gradient (matches mock): #2563EB → #CD84FC → #25EBD1 */
    --headline-grad-start: #2563EB; /* 4%  */
    --headline-grad-mid:   #CD84FC; /* 51% */
    --headline-grad-end:   #25EBD1; /* 100% */
    --headline-gradient: linear-gradient(90deg,
      var(--headline-grad-start) 4%,
      var(--headline-grad-mid)   51%,
      var(--headline-grad-end)   100%
    );
  }

  .dark {
    --background: 260 5.1% 12%;
    --foreground: 0 0% 98%;

    --card: 260 5.1% 15%;
    --card-foreground: 0 0% 98%;

    --popover: 260 5.1% 10%;
    --popover-foreground: 0 0% 98%;

    --primary: 279 64% 32%;
    --primary-foreground: 0 0% 100%;

    --secondary: 165 100% 29%;
    --secondary-foreground: 0 0% 100%;

    --accent: 200 54% 32%;
    --accent-foreground: 0 0% 100%;

    --highlight: 173 80% 53%;
    --highlight-foreground: 260 11% 11%;

    --muted: 0 0% 61.6%;
    --muted-foreground: 0 0% 98%;

    --destructive: 0 72.2% 50.6%;
    --destructive-foreground: 0 0% 98%;

    --border: 260 5% 25%;
    --input: 260 5% 25%;
    --ring: 279 64% 45%;

    /* same headline gradient in dark */
    --headline-grad-start: #2563EB;
    --headline-grad-mid:   #CD84FC;
    --headline-grad-end:   #25EBD1;
    --headline-gradient: linear-gradient(90deg,
      var(--headline-grad-start) 4%,
      var(--headline-grad-mid)   51%,
      var(--headline-grad-end)   100%
    );
  }
}

/* =========================
   Base element styles
   ========================= */
@layer base {
  * { @apply border-border; }

  body {
    @apply bg-background text-foreground;
    font-family: 'Montserrat', sans-serif;
  }

  /* Headings and utility classes */
  h1, h2, h3, .font-heading { @apply font-black; }
  h4, h5, h6, .font-subheading { @apply font-semibold; }

  /* Base sizes and tightened rhythm */
  h1 { @apply text-3xl leading-relaxed mt-8 mb-4; }
  h2 { @apply text-2xl leading-snug mt-6 mb-3; }
  h3 { @apply text-xl  leading-snug mt-5 mb-3; }
  h4 { @apply text-lg  mt-4 mb-2; }
  h5 { @apply text-base mt-3 mb-2; }
  h6 { @apply text-sm   mt-2 mb-1; }

  p, span, div, a, button, li, label, input, textarea, select, .font-body {
    @apply font-normal;
  }

  ul, ol { @apply pl-6 mb-3 mt-3; }
  ul { @apply list-disc; }
  ol { @apply list-decimal; }
  li { @apply mb-1; }
}

/* =========================
   Responsive heading ramps
   ========================= */
@layer base {
  @screen sm {
    h1 { @apply text-4xl leading-relaxed; }
    h2 { @apply text-3xl; }
    h3 { @apply text-2xl; }
    h4 { @apply text-xl; }
    h5 { @apply text-lg; }
    h6 { @apply text-base; }
  }

  @screen md {
    h1 { @apply text-5xl leading-relaxed; }
    h2 { @apply text-4xl; }
    h3 { @apply text-3xl; }
    h4 { @apply text-2xl; }
    h5 { @apply text-xl; }
    h6 { @apply text-lg; }
  }

  @screen lg {
    h1 { @apply text-6xl leading-relaxed; }
  }
}

/* =========================
   Global tweaks
   ========================= */
body { background-color: hsl(var(--background)); }

/* Custom scrollbar */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track {
  background: hsl(var(--background) / 0.8);
  border-radius: 10px;
}
::-webkit-scrollbar-thumb {
  background: hsl(var(--primary) / 0.7);
  border-radius: 10px;
}
::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--primary));
}

/* Gradient text helper padding (for your two-line hero) */
span.block.bg-clip-text.text-transparent.bg-gradient-to-r.from-primary.via-highlight.to-secondary {
  padding-bottom: 20px;
}

/* =========================
   Sitewide gradient H1s (custom stops)
   ========================= */
@layer base {
  /* Use the new custom gradient; add .gradient-headline to use on non-H1 text */
  h1, .prose h1, .gradient-headline {
    background-image: var(--headline-gradient);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
  }
}

/* Opt-out helper for pages that keep their own gradient (e.g., hero) */
.no-gradient-text, .no-gradient-text * {
  background-image: none !important;
  -webkit-text-fill-color: currentColor !important;
  color: currentColor !important;
}

/* =========================
   Mobile text spillover protection (scoped)
   ========================= */
@layer base {
  /* Body text: allow safe breaks for long URLs and long words */
  .prose p, p, a, button, li {
    overflow-wrap: break-word;
    word-break: break-word;
    hyphens: auto;
  }

  /* Headings: do NOT split words and balance lines */
  h1, .prose h1, h2, h3 {
    overflow-wrap: normal;
    word-break: normal;
    hyphens: manual;
    text-wrap: balance;
  }
}

/* =========================
   Mobile CTA padding helper
   ========================= */
@media (max-width: 640px) {
  .cta-pad { padding-left: 1rem; padding-right: 1rem; }
}

/* =========================
   Mobile menu active link gradient (matches headlines)
   ========================= */
.nav-mobile a[aria-current="page"],
.mobile-menu a[aria-current="page"],
.gradient-link {
  background-image: var(--headline-gradient);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

/* =========================
   Nav links: gradient on hover + active
   (works for desktop + mobile; excludes button-styled links)
   ========================= */

/* Optional: smoother color transitions */
.header nav a,
.site-nav a,
.main-nav a,
.nav-mobile a,
.mobile-menu a {
  transition: color 200ms ease, background-image 200ms ease;
}

/* Desktop menus */
.header nav a:not(.btn):not(.button):not([role="button"]),
.site-nav a:not(.btn):not(.button):not([role="button"]),
.main-nav a:not(.btn):not(.button):not([role="button"]) {
  color: hsl(var(--foreground));
}

.header nav a:hover:not(.btn):not(.button):not([role="button"]),
.header nav a:focus-visible:not(.btn):not(.button):not([role="button"]),
.header nav a[aria-current="page"]:not(.btn):not(.button):not([role="button"]),
.site-nav a:hover:not(.btn):not(.button):not([role="button"]),
.site-nav a:focus-visible:not(.btn):not(.button):not([role="button"]),
.site-nav a[aria-current="page"]:not(.btn):not(.button):not([role="button"]),
.main-nav a:hover:not(.btn):not(.button):not([role="button"]),
.main-nav a:focus-visible:not(.btn):not(.button):not([role="button"]),
.main-nav a[aria-current="page"]:not(.btn):not(.button):not([role="button"]) {
  color: #25EBD1;
}

/* Mobile menus */
.nav-mobile a:hover,
.nav-mobile a:focus-visible,
.nav-mobile a[aria-current="page"],
.mobile-menu a:hover,
.mobile-menu a:focus-visible,
.mobile-menu a[aria-current="page"] {
  color: #25EBD1;
}

/* Navigation link color - custom teal for header only */
.nav-link-active {
  color: #25EBD1 !important;
}

.nav-link-hover:hover {
  color: #25EBD1 !important;
}

/* Ensure the underline indicator also uses teal */
.nav-link-underline {
  background-color: #25EBD1 !important;
}

/* Fallback for very old browsers (no background-clip support) */
@supports not (-webkit-background-clip: text) {
  .header nav a:hover,
  .header nav a:focus-visible,
  .header nav a[aria-current="page"],
  .site-nav a:hover,
  .site-nav a:focus-visible,
  .site-nav a[aria-current="page"],
  .main-nav a:hover,
  .main-nav a:focus-visible,
  .main-nav a[aria-current="page"],
  .nav-mobile a:hover,
  .nav-mobile a:focus-visible,
  .nav-mobile a[aria-current="page"],
  .mobile-menu a:hover,
  .mobile-menu a:focus-visible,
  .mobile-menu a[aria-current="page"] {
    color: #25EBD1; /* readable fallback */
  }
}
@layer utilities {
  .hs-form { @apply w-full; }

  /* Inputs full width */
  .hs-form .hs-input { @apply w-full; }

  /* Reduce heading + paragraph size in the form */
  .hs-form h2 { @apply text-xl font-semibold; }
  .hs-form .hs-richtext p { @apply text-sm; }

  /* Trim default gaps */
  .hs-form fieldset { margin: 0 !important; padding: 0 !important; max-width: 100% !important; }
  .hs-form .hs-form-field { @apply mb-4; }
  .hs-form .legal-consent-container { @apply mt-3; }

  /* Phone input alignment */
  .hs-form .hs-phone .input { @apply flex items-stretch gap-2; }
  .hs-form .hs-phone select,
  .hs-form .hs-phone input { @apply w-full; }

  /* Submit button responsive width */
  .hs-form input[type="submit"] { @apply w-full sm:w-auto; }
}
ol li {
  margin-bottom: 1.5rem; /* adjust as needed */
}

/* =========================
   Blog Post Content Styling
   ========================= */
.post-content {
  /* Better spacing for all content elements */
  line-height: 1.7;
}

.post-content h2 {
  @apply text-2xl font-bold mt-8 mb-4;
  border-bottom: 2px solid hsl(var(--border));
  padding-bottom: 0.5rem;
  background-image: var(--headline-gradient);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
}

.post-content h3 {
  @apply text-xl font-semibold mt-6 mb-3;
  background-image: var(--headline-gradient);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
}

.post-content h4 {
  @apply text-lg font-medium mt-4 mb-2;
  background-image: var(--headline-gradient);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
}

.post-content p {
  @apply mb-4;
  text-align: justify;
  hyphens: auto;
}

/* Bold text styling */
.post-content strong,
.post-content b {
  font-weight: 700 !important;
  color: hsl(var(--foreground));
}

/* Italic text styling */
.post-content em,
.post-content i {
  font-style: italic;
  color: hsl(var(--foreground));
}

.post-content ul,
.post-content ol {
  @apply mb-6 mt-4;
  padding-left: 2.5rem;
}

.post-content ul {
  list-style-position: outside;
  list-style-type: disc;
}

.post-content ul li {
  display: list-item;
  list-style: disc outside;
  margin-left: 0;
  padding-left: 0.5rem;
}

.post-content ol {
  list-style-position: outside;
  list-style-type: decimal;
}

.post-content ol li {
  display: list-item;
  list-style: decimal outside;
  margin-left: 0;
  padding-left: 0.5rem;
}

.post-content li {
  @apply mb-2;
  line-height: 1.6;
  color: hsl(var(--foreground));
}

/* Ensure bold text in lists is visible */
.post-content li strong,
.post-content li b {
  font-weight: 700 !important;
  color: hsl(var(--foreground));
}

/* Ensure bullet points are visible */
.post-content ul li::marker {
  color: #25EBD1;
  font-size: 1.2em;
}

.post-content ol li::marker {
  color: #25EBD1;
  font-weight: 600;
}

.post-content blockquote {
  @apply border-l-4 border-primary pl-6 py-2 my-6 italic;
  background: hsl(var(--card));
  border-radius: 0 0.5rem 0.5rem 0;
}

.post-content table {
  @apply w-full my-6 border border-border rounded-lg overflow-hidden;
  border-collapse: separate;
  border-spacing: 0;
}

.post-content th {
  @apply bg-card px-4 py-3 text-left font-semibold border-b border-border;
}

.post-content td {
  @apply px-4 py-3 border-b border-border;
}

.post-content tbody tr:last-child td {
  border-bottom: none;
}

.post-content tbody tr:hover {
  @apply bg-card/50;
}

/* Blog images specific styling */
.post-content .blog-image,
.post-content img {
  @apply w-full h-auto rounded-lg shadow-md my-8 object-cover;
  max-height: 400px;
  display: block;
  margin-left: auto;
  margin-right: auto;
}

/* Ensure all images display properly */
.post-content img {
  display: block !important;
}

/* Better link styling within content */
.post-content a {
  color: #25EBD1;
  text-decoration: underline;
  text-decoration-color: rgba(37, 235, 209, 0.5);
  transition: all 0.2s ease;
}

.post-content a:hover {
  color: #1fd4b8;
  text-decoration-color: #1fd4b8;
}

/* Code styling */
.post-content code {
  @apply bg-card px-2 py-1 rounded text-sm font-mono;
}

.post-content pre {
  @apply bg-card p-4 rounded-lg overflow-x-auto my-4;
}

.post-content pre code {
  @apply bg-transparent p-0;
}

/* Better spacing for nested elements */
.post-content li p {
  @apply mb-2 mt-1;
}

.post-content li ul,
.post-content li ol {
  @apply mt-2 mb-2;
  padding-left: 2rem;
}

/* Nested list styling */
.post-content ul ul {
  list-style-type: circle;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

.post-content ul ul ul {
  list-style-type: square;
}

/* Force list visibility */
.post-content * {
  box-sizing: border-box;
}

.post-content ul li,
.post-content ol li {
  position: relative;
  display: list-item !important;
  margin-bottom: 0.75rem;
}

/* Additional fallback for problematic content */
.post-content p + ul,
.post-content p + ol {
  margin-top: 1rem;
}

.post-content ul + p,
.post-content ol + p {
  margin-top: 1rem;
}

/* Additional bold text overrides */
.post-content * strong,
.post-content * b,
strong,
b {
  font-weight: 700 !important;
  font-family: inherit;
}

/* Ensure prose styles don't override our bold styling */
.prose strong,
.prose b,
.prose-invert strong,
.prose-invert b {
  font-weight: 700 !important;
  color: inherit !important;
}

/* Make sure headings with bold elements are visible */
.post-content h1 strong, .post-content h1 b,
.post-content h2 strong, .post-content h2 b,
.post-content h3 strong, .post-content h3 b,
.post-content h4 strong, .post-content h4 b {
  font-weight: 900 !important;
}

/* FAQ sections common in BabyLove posts */
.post-content h4[id*="faq"],
.post-content h4[id*="question"],
.post-content h4:has(+ p:last-child) {
  @apply text-base font-medium mt-6 mb-2 text-highlight;
}

/* Better table of contents styling */
.post-content h2[id*="table-of-contents"] + ul,
.post-content h2[id*="contents"] + ul,
.post-content h2:contains("Table of Contents") + ul,
.post-content h2:contains("Contents") + ul {
  @apply bg-card p-4 rounded-lg border border-border;
  list-style: none !important;
  padding-left: 1rem !important;
}

.post-content h2[id*="table-of-contents"] + ul li,
.post-content h2[id*="contents"] + ul li,
.post-content h2:contains("Table of Contents") + ul li,
.post-content h2:contains("Contents") + ul li {
  @apply mb-1;
  list-style: none !important;
  display: block !important;
  margin-left: 0 !important;
  padding-left: 0 !important;
}

.post-content h2[id*="table-of-contents"] + ul li::marker,
.post-content h2[id*="contents"] + ul li::marker,
.post-content h2:contains("Table of Contents") + ul li::marker,
.post-content h2:contains("Contents") + ul li::marker {
  content: none !important;
  display: none !important;
}

.post-content h2[id*="table-of-contents"] + ul a,
.post-content h2[id*="contents"] + ul a,
.post-content h2:contains("Table of Contents") + ul a,
.post-content h2:contains("Contents") + ul a {
  @apply no-underline hover:underline text-foreground hover:text-highlight;
}

/* Additional TOC styling patterns */
.post-content ul li a[href^="#"] {
  color: #25EBD1;
  text-decoration: none;
  transition: all 0.2s ease;
}

.post-content ul li a[href^="#"]:hover {
  color: #1fd4b8;
  text-decoration: underline;
}

/* Special handling for nested TOC lists */
.post-content h2[id*="table-of-contents"] + ul ul,
.post-content h2[id*="contents"] + ul ul {
  list-style: none !important;
  margin-top: 0.5rem !important;
  margin-bottom: 0.5rem !important;
  padding-left: 1.5rem !important;
}

.post-content h2[id*="table-of-contents"] + ul ul li,
.post-content h2[id*="contents"] + ul ul li {
  list-style: none !important;
  display: block !important;
}

.post-content h2[id*="table-of-contents"] + ul ul li::marker,
.post-content h2[id*="contents"] + ul ul li::marker {
  content: none !important;
  display: none !important;
}

/* General TOC detection and styling */
.post-content ul:has(li a[href^="#"]) {
  background: hsl(var(--card));
  padding: 1rem;
  border-radius: 0.5rem;
  border: 1px solid hsl(var(--border));
  list-style: none !important;
  margin: 1.5rem 0;
}

.post-content ul:has(li a[href^="#"]) li {
  list-style: none !important;
  display: block !important;
  margin-bottom: 0.5rem;
  padding-left: 0 !important;
  margin-left: 0 !important;
}

.post-content ul:has(li a[href^="#"]) li::marker {
  content: none !important;
  display: none !important;
}

/* Purple heading detection for TOC */
.post-content h2[style*="color"] + ul,
.post-content h3[style*="color"] + ul,
.post-content h4[style*="color"] + ul {
  background: hsl(var(--card));
  padding: 1rem;
  border-radius: 0.5rem;
  border: 1px solid hsl(var(--border));
  list-style: none !important;
  margin: 1.5rem 0;
}

.post-content h2[style*="color"] + ul li,
.post-content h3[style*="color"] + ul li,
.post-content h4[style*="color"] + ul li {
  list-style: none !important;
  display: block !important;
  margin-bottom: 0.5rem;
  padding-left: 0 !important;
  margin-left: 0 !important;
}

.post-content h2[style*="color"] + ul li::marker,
.post-content h3[style*="color"] + ul li::marker,
.post-content h4[style*="color"] + ul li::marker {
  content: none !important;
  display: none !important;
}